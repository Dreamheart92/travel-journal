import{f as A,b as y,g as b,s as p,j as e,L as N,P as g,e as $,h as E,r as h,i as L,J as B,k as J,E as P,B as k,F as T,N as D,l as w,m as R,S as M,n as Q,o as F}from"./index-CEjWu8zT.js";import{N as U}from"./index-CyRrwGCL.js";import{J as I}from"./index-rhvUK8Cb.js";import{n as v}from"./stringUtils-CSt2nhWB.js";const O="_wrapper_13xjn_1",q={wrapper:O},G=()=>{const[n,s]=A();return{searchParams:n,onQuery:(r,a)=>{s(o=>(o.set(r,a),o))}}},Y=G,H={"journals-container":"_journals-container_1qr71_1"},K=n=>n.search,W=()=>{const n=y(),{search:s,currentPage:t,totalPages:r,isSearching:a,sortByOptions:o,sortBy:i}=b(K);return{search:s,currentPage:t,totalPages:r,isSearching:a,sortBy:i,sortByOptions:o,onSortBy:l=>{n(p.setSortBy({option:l}))},onSearch:l=>{n(p.setSearch({search:l}))},resetSearch:()=>{n(p.resetState())}}},j=W,V="_wrapper_100ba_1",f={wrapper:V,"image-wrapper":"_image-wrapper_100ba_8"},X="_label_c5kyg_1",Z={label:X};function ee({destination:n}){return e.jsx("p",{className:Z.label,children:v(n)})}function ne({journal:n}){const{destination:s,imageUrl:t}=n;return e.jsx("div",{className:f.wrapper,children:e.jsxs(N,{to:`${g.DETAILS}/${n._id}`,children:[e.jsx("div",{className:f["image-wrapper"],children:e.jsx($,{imageUrl:t})}),e.jsx(I,{journal:n,readMore:!0}),e.jsx(ee,{destination:s.name})]})})}const se="_pagination_j2zvc_1",u={pagination:se,"pagination-left":"_pagination-left_j2zvc_10","pagination-right":"_pagination-right_j2zvc_14"};function te({totalPages:n,currentPage:s,onQuery:t,children:r}){const a=i=>{t("page",i==="next"?s+1:s-1)},o=s===n;return e.jsxs(e.Fragment,{children:[s!==1&&e.jsx("button",{type:"button",onClick:()=>a("previous"),className:`${u.pagination} ${u["pagination-left"]}`,children:"Previous Page"}),r,!o&&e.jsx("button",{type:"button",onClick:()=>a("next"),className:`${u.pagination} ${u["pagination-right"]}`,children:"Next Page"})]})}function ae({onQuery:n,totalPages:s,currentPage:t,journals:r}){return e.jsx(te,{onQuery:n,totalPages:s,currentPage:t,children:r.map(a=>e.jsx(ne,{journal:a},a._id))})}const re=n=>{const s=[];return n.entries().forEach(([t,r])=>{s.push(`${t}=${r}`)}),s.length>0?`?${s.join("&")}`:""};function oe({destination:n,searchParams:s,onQuery:t}){const r=y(),{journals:a,totalPages:o,loading:i,error:c,fetchJournals:x}=E(),{resetSearch:_}=j(),l=Number(s.get("page"))||1;return h.useEffect(()=>{const C=re(s),z=x(C,n);return()=>{z.abort(),r(L.resetState({key:B.JOURNALS}))}},[r,n,s]),h.useEffect(()=>{_()},[n]),e.jsxs("div",{className:H["journals-container"],children:[i&&e.jsx(J,{}),!i&&a&&e.jsxs(e.Fragment,{children:[a.length<=0&&e.jsx(U,{}),a.length>0&&e.jsx(ae,{currentPage:l,totalPages:o,journals:a,onQuery:t})]}),c&&e.jsx(P,{large:!0,message:c.message})]})}const ie={"sidebar-section":"_sidebar-section_ocal2_1"};function d({heading:n,children:s}){return e.jsxs("div",{className:ie["sidebar-section"],children:[e.jsx("h3",{children:n}),s]})}function ce(){return e.jsx(d,{heading:"Your Travel Stories",children:e.jsx(N,{to:g.CREATE,children:e.jsx(k,{caption:"Create Journal"})})})}const le={prefix:"fas",iconName:"magnifying-glass",icon:[512,512,[128269,"search"],"f002","M416 208c0 45.9-14.9 88.3-40 122.7L502.6 457.4c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L330.7 376c-34.4 25.2-76.8 40-122.7 40C93.1 416 0 322.9 0 208S93.1 0 208 0S416 93.1 416 208zM208 352a144 144 0 1 0 0-288 144 144 0 1 0 0 288z"]},ue="_search_1oazk_1",he="_icon_1oazk_12",m={"search-wrapper":"_search-wrapper_1oazk_1",search:ue,icon:he};function de({onQuery:n}){const{search:s,isSearching:t,onSearch:r}=j(),a=h.useRef(null),o=i=>{r(i.target.value)};return h.useEffect(()=>(t&&(a.current=setTimeout(()=>{n("search",s)},500)),()=>{t&&a.current&&clearTimeout(a.current)}),[s]),e.jsx(d,{heading:"Search",children:e.jsxs("div",{className:m["search-wrapper"],children:[e.jsx("input",{className:m.search,type:"text",id:"search",name:"search",placeholder:"Search journals...",value:s,onChange:o}),e.jsx(T,{className:m.icon,icon:le})]})})}function pe({filter:n}){return e.jsx(D,{filter:!0,to:`${g.CATALOGUE}/${n}`,children:e.jsx("p",{children:v(n)})})}const me={"filters-section":"_filters-section_1mshm_1"};function ge(){const{destinations:n}=w();return e.jsx(d,{heading:"Destinations",children:e.jsx("ul",{className:me["filters-section"],children:n.map(s=>e.jsx("li",{children:e.jsx(pe,{filter:s.name})},s._id))})})}const je={"sort-by-wrapper":"_sort-by-wrapper_8vyg5_1"};function xe({onQuery:n}){const{sortBy:s,sortByOptions:t,onSortBy:r}=j(),a=o=>{const{value:i}=o.target,c=o.target.selectedOptions[0].id;r({normalized_name:c,name:i}),n("sortBy",i)};return e.jsx(d,{heading:"Sort",children:e.jsx("select",{className:je["sort-by-wrapper"],value:s.name,onChange:a,children:t.map(o=>e.jsx("option",{value:o.name,id:o.normalized_name,children:o.normalized_name},o.name))})})}function _e({onQuery:n}){const s=b(R);return e.jsxs(M,{width:"20em",children:[s&&e.jsx(ce,{}),e.jsx(xe,{onQuery:n}),e.jsx(de,{onQuery:n}),e.jsx(ge,{})]})}const fe="_caption_hcewz_11",S={"destination-header":"_destination-header_hcewz_1",caption:fe},Se=(n,s)=>n?s.find(t=>t.name===n):null;function ye({destination:n}){const{destinations:s}=w(),t=Se(n,s),r=t?t.imageUrl:"/around-the-world.jpg",a=t?t.name:"Around the World";return e.jsxs("div",{className:S["destination-header"],children:[e.jsx($,{imageUrl:r}),e.jsx("h1",{className:S.caption,children:a})]})}function ve(){const{destination:n}=Q(),{searchParams:s,onQuery:t}=Y();return e.jsxs(F,{customStyle:{paddingBottom:"5em"},children:[e.jsx(ye,{destination:n}),e.jsxs("div",{className:q.wrapper,children:[e.jsx(oe,{onQuery:t,destination:n,searchParams:s}),e.jsx(_e,{onQuery:t})]})]})}export{ve as default};

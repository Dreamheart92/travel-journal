import{u as T,a as _,C as w,r as i,P as A,j as s,B as L,b as x,c as R}from"./index-CEjWu8zT.js";import{u as I}from"./useForm-BSh5y4x3.js";import{u as M,F as r}from"./useCrud-6uD_6Pwn.js";import{V as e}from"./validations-DU48qaoM.js";import{A as P}from"./index-D-YelxPp.js";import"./stringUtils-CSt2nhWB.js";function U(){const[t]=I(),m=T(),d=_(),{data:l,loading:p,success:o,error:a,signup:c}=M(w.CREATE);i.useEffect(()=>{o&&(d.saveUser(l),m(A.HOME)),a&&(t.resetField("password"),t.resetField("confirmPassword"))},[o,a]);const[E,n]=i.useState(!0),S=u=>{const{password:h,confirmPassword:f}=u;if(h!==f){n(!1),t.resetField("password"),t.resetField("confirmPassword");return}n(!0),c(u)},g=E?a:{error:!0,message:"Passwords not matching"},N=!t.isValidForm&&t.hasBeenSubmitted;return s.jsxs(r,{submitCallback:S,error:g,children:[s.jsx(r.Input,{name:"email",placeholder:"Email",inputType:"text",validators:[{required:!0,message:"Email is required"},{email:!0,message:"Email address is invalid"}]}),s.jsx(r.Input,{name:"username",placeholder:"Username",inputType:"text",validators:[{required:!0,message:"Username is required"},{minLength:e.USER.USERNAME_MIN_LENGTH,message:`Username must be at least ${e.USER.USERNAME_MIN_LENGTH} characters long`}]}),s.jsx(r.Input,{name:"firstName",placeholder:"First Name",inputType:"text",validators:[{required:!0,message:"First Name is required"},{minLength:e.USER.FIRST_NAME_MIN_LENGTH,message:`First Name must be at least ${e.USER.FIRST_NAME_MIN_LENGTH} characters long`}]}),s.jsx(r.Input,{name:"lastName",placeholder:"Last Name",inputType:"text",validators:[{required:!0,message:"Last Name is required"},{minLength:e.USER.LAST_NAME_MIN_LENGTH,message:`Last Name must be at least ${e.USER.LAST_NAME_MIN_LENGTH} characters long`}]}),s.jsx(r.Input,{name:"password",placeholder:"Password",inputType:"text",type:"password",validators:[{required:!0,message:"Password is required"},{minLength:e.USER.PASSWORD_MIN_LENGTH,message:`Password must be at least ${e.USER.PASSWORD_MIN_LENGTH} characters long`}]}),s.jsx(r.Input,{name:"confirmPassword",placeholder:"Confirm Password",inputType:"text",type:"password",validators:[{required:!0,message:"Confirm Password is required"},{minLength:e.USER.PASSWORD_MIN_LENGTH,message:`Confirm Password must be at least ${e.USER.PASSWORD_MIN_LENGTH} characters long`}]}),s.jsx(L,{submitButton:!0,caption:"Sign up",disabled:N,isLoading:p})]})}const b={title:"Join the Adventure!",caption:"Sign up to create your Travel Journal, share your stories, and explore a world of new destinations with fellow travelers.",form:s.jsx(U,{})};function G(){const t=x();return i.useEffect(()=>()=>t(R.resetState())),s.jsx(P,{settings:b})}export{G as default};
